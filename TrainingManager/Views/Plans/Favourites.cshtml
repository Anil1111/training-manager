@model TrainingManager.ViewModels.PlansViewModel
@{
    ViewBag.Title = Model.Heading;
}

<h1 class="text-center">@Model.Heading</h1>
<hr />

@foreach (var plan in Model.PlansToDisplay)
{
    <div class="row plan-block">
        <div class="col-xs-2 plan-rating">
            <p class="rating-value">@plan.Rating/5</p>
        </div>

        <div class="col-xs-8 text-center middle-content">
            <a href="@Url.Action("Index", "User", new { Id = plan.UserId })">@plan.User.Name</a>
            <div class="name">
                @plan.Name
                @if (plan.IsRemoved)
                {
                    <span class="label label-default">Removed</span>
                }
            </div>
        </div>

        <div class="col-xs-2 details" style="padding: 0px">
            <button class="doubleBtn btn btn-success" onclick="location.href='@Url.Action("Summary", "Plans", new { id = plan.Id })'" disabled="@plan.IsRemoved">View</button>
            <button class="doubleBtn btn btn-danger js-remove-favourite" data-plan-id="@plan.Id">Remove</button>
        </div>
    </div>
}

@section Scripts
{
    <script>
        $(document).ready(function () {
            FavouritesController.init("#plans");
        })
    </script>
}
